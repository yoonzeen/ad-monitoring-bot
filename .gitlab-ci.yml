# Playwright와 브라우저가 이미 포함된 이미지를 사용하여 설치 시간을 줄입니다.
image: mcr.microsoft.com/playwright:v1.40.0-jammy

# 전체 작업에 타임아웃 10분을 부여 (기본보다 넉넉하게)
variables:
  NODE_OPTIONS: "--max-old-space-size=4096"

pages:
  stage: deploy
  timeout: 10m                      # 이 작업에 10분이라는 시간을 충분히 줌
  script:
    - npm install                  # 필요한 패키지만 설치
    # 브라우저 설치(npx playwright install)는 이미지에 포함되어 있어 생략 가능합니다.
    - mkdir -p public              # 결과 폴더 생성
    - node monitor.js              # 봇 실행
  artifacts:
    paths:
      - public
  only:
    - main